# Sprint-IOT-IA

## TrackYard - Otimizando a Log√≠stica com Vis√£o Computacional

### Vis√£o Geral

O **TrackYard** √© uma plataforma inovadora que utiliza vis√£o computacional para rastrear e gerenciar motocicletas em tempo real, focada em resolver inefici√™ncias log√≠sticas em opera√ß√µes de grande escala, como as da **Mottu**, que lidam com mais de 100 filiais em diversas plantas no Brasil.

Este projeto combina:

- Backend robusto
- Frontend mobile
- Sistema de leitura de QR Codes

Tudo voltado √† **otimiza√ß√£o operacional**.

---

### Problema Real

Empresas como a **Mottu** enfrentam desafios cr√≠ticos na gest√£o de frotas de motocicletas:

- **Localiza√ß√£o Manual**: Gera erros, retrabalho e baixa produtividade.
- **Falta de Visibilidade**: Aus√™ncia de dados em tempo real causa atrasos e dificulta a escalabilidade.
- **Riscos e Custos**: A falta de padroniza√ß√£o aumenta os riscos de seguran√ßa e eleva custos operacionais.

Essas inefici√™ncias prejudicam a expans√£o de opera√ß√µes log√≠sticas em larga escala, criando a necessidade de uma **solu√ß√£o tecnol√≥gica acess√≠vel e escal√°vel**.

---

### Justificativa para Vis√£o Computacional

O **TrackYard** adota Vis√£o Computacional como base tecnol√≥gica para superar esses desafios:

- üìç **Rastreamento Preciso**: A leitura de QR Codes elimina processos manuais, reduzindo erros e retrabalho.
- üìà **Escalabilidade**: Permite rastrear muitas motos em tempo real, independentemente do tamanho da filial.
- üí∞ **Custo-Benef√≠cio**: Utiliza smartphones e c√¢meras existentes, evitando hardware caro como GPS.
- ‚öôÔ∏è **Efici√™ncia Operacional**: Alertas e atualiza√ß√µes em tempo real otimizam a gest√£o, reduzindo atrasos e custos.

Essa abordagem **minimiza custos de infraestrutura** e **maximiza a acessibilidade**, aproveitando dispositivos j√° dispon√≠veis.

---

### Tecnologias Utilizadas e Aplica√ß√£o

#### Backend (Java com Spring Boot)

- **Descri√ß√£o**: Desenvolvido em Java utilizando o framework Spring Boot.
- **Aplica√ß√£o**: 
  - Gerencia a l√≥gica de neg√≥cios.
  - Processa dados enviados pelo script Python (localiza√ß√£o via QR Code).
  - Armazena informa√ß√µes no banco de dados.
  - Fornece APIs RESTful para integra√ß√£o com o frontend.
- **Benef√≠cio**: Robusto, escal√°vel e seguro, ideal para grandes volumes de dados em tempo real.

---

#### Frontend Mobile (React Native)

- **Descri√ß√£o**: Criado com React Native, framework multiplataforma (Android/iOS).
- **Aplica√ß√£o**: 
  - Interface para escaneamento de QR Codes.
  - Visualiza√ß√£o de dados de localiza√ß√£o.
  - Recebimento de alertas em tempo real.
  - Gera√ß√£o de relat√≥rios e navega√ß√£o entre p√°tios.
- **Benef√≠cio**: Experi√™ncia fluida e intuitiva em qualquer dispositivo m√≥vel.

---

#### Script Python para Leitura de QR Codes

- **Bibliotecas Utilizadas**: `cv2` (OpenCV), `pyzbar`, `requests`, `time`.

##### Aplica√ß√£o:

- **Captura de V√≠deo**: `cv2.VideoCapture(1)` via DroidCam ou USB.
- **Decodifica√ß√£o**: `pyzbar.decode` identifica QR Codes com `ZBarSymbol.QRCODE`.
- **Processamento**: Tenta ler o conte√∫do como JSON e envia via `requests.post` ao backend.
- **Visualiza√ß√£o**: Ret√¢ngulos verdes e texto sobrepostos aos QR Codes com `cv2.rectangle` e `cv2.putText`.
- **Controle de Tempo**: `time.time()` com `read_interval` (3s) evita leituras redundantes.

- **Benef√≠cio**: Rastreia em tempo real com baixa lat√™ncia usando hardware j√° dispon√≠vel.

---

### Outras Tecnologias

#### OpenCV (cv2)

- **Aplica√ß√£o**: Processamento de imagem para valida√ß√£o visual do QR Code.
- **Benef√≠cio**: Feedback visual ao operador, melhorando a interface e precis√£o.

---

### Como Funciona

1. **Escaneamento**: O operador usa o app React Native para capturar imagens via c√¢mera.
2. **Decodifica√ß√£o**: O script Python processa o frame e extrai os dados do QR Code.
3. **Envio ao Backend**: Os dados (em JSON) s√£o enviados ao backend em Spring Boot via POST.
4. **Visualiza√ß√£o**: O frontend exibe as informa√ß√µes em tempo real com alertas.
5. **Manuten√ß√£o**: Atualiza√ß√µes frequentes melhoram desempenho e corrigem erros.

---

### Benef√≠cios

- ‚úÖ Redu√ß√£o de erros com rastreamento automatizado.
- ‚úÖ Visibilidade em tempo real para decis√µes r√°pidas.
- ‚úÖ Solu√ß√£o escal√°vel e acess√≠vel, ideal para grandes opera√ß√µes log√≠sticas.

---

# üì∑ Passo a Passo do Leitor de QR Code 

Este script utiliza a webcam (incluindo a do celular via DroidCam) para detectar QR Codes em tempo real, interpretar os dados como JSON e envi√°-los para uma API REST em um backend Java.
Caso queira testar a integra√ß√£o com o backend basta rodar os dois codigos na mesma maquina local que os dados serao enviados via endpoint para o backend quando o qrcode for lido

---

## üöÄ Pr√©-requisitos

- Python 3.7 ou superior
- Pip (gerenciador de pacotes do Python)
- Link Para o reposit√≥rio Backend em java: `https://github.com/LuigiBerzaghi/Sprint1Java.git`
- Backend Java rodando em `http://localhost:8080/api/movimentacoes`
- (Opcional) DroidCam instalado e funcionando se for usar a c√¢mera do celular, mas para testar o funcionamento do c√≥digo apenas a webcam ja √© suficiente

---
## QRcode
- O QRcodeteste.jpeg pode ser usado para testar o c√≥digo, ele devolve um json ja no formato correto para ser enviado para o backend
## üß∞ Instala√ß√£o

### 1. Clone o reposit√≥rio ou salve o script:

```bash
git clone https://github.com/Guilherme-Pelissari/Sprint2-IOT-IA.git
cd Sprint2-IOT-IA/leitor_qrcode
``` 

## 2. Instale as depend√™ncias

```bash
pip install opencv-python pyzbar requests
```

> ‚ö†Ô∏è **Windows:** pode ser necess√°rio instalar o ZBar manualmente:
>
> **Via Chocolatey:**
>
> ```bash
> choco install zbar
> ```
>
> Ou baixe o instalador manualmente:  
> [https://github.com/NaturalHistoryMuseum/pyzbar#windows](https://github.com/NaturalHistoryMuseum/pyzbar#windows)

---

## ‚öôÔ∏è Configura√ß√£o

- Verifique o √≠ndice da c√¢mera no trecho `cv2.VideoCapture(0)`.  
  Pode ser necess√°rio trocar `1` por `0`, `2`, etc. geralmente o `0`se for utilizar a webcam nativa e o `1`se conectar o smartphone via droidcam para usar a camera do celular

---

## ‚ñ∂Ô∏è Como executar

```bash
python leitor_qrcode.py
```

---

## üß™ Funcionamento

- A c√¢mera ser√° ativada e come√ßar√° a escanear QR Codes.
- Ao encontrar um QR Code com **JSON v√°lido**, o conte√∫do ser√° enviado via **POST** para o backend.
- H√° um intervalo de **3 segundos** entre cada leitura.
- Pressione `q` para encerrar o programa.

---

## üì± Como usar o DroidCam via USB com Python (OPCIONAL)

Este guia mostra como configurar a c√¢mera do seu celular como webcam no computador usando **DroidCam via USB**, permitindo que ela funcione com o OpenCV para leitura de QR Codes no script Python.

---

### üîß Passo a passo para configurar o DroidCam com USB

#### 1. Instale o app no celular

- Acesse a Play Store (Android) ou App Store (iOS) e instale o app **DroidCam**:
  - [DroidCam para Android](https://play.google.com/store/apps/details?id=com.dev47apps.droidcam)
  - [DroidCam para iOS](https://apps.apple.com/app/id1510258102)

#### 2. Instale o cliente do DroidCam no PC

- Baixe e instale o **cliente do DroidCam para Windows ou Linux** no site oficial:
  - [https://www.dev47apps.com/](https://www.dev47apps.com/)

#### 3. Ative a depura√ß√£o USB no celular

- No Android:
  - Ative o **Modo de desenvolvedor** (Toque 7x em "N√∫mero da vers√£o" nas configura√ß√µes ‚Üí Sobre o telefone).
  - V√° em **Op√ß√µes de desenvolvedor** e ative **Depura√ß√£o USB**.

#### 4. Conecte o celular via cabo USB ao computador

- Conecte o celular usando um cabo USB.
- Confirme a autoriza√ß√£o de depura√ß√£o USB, se solicitado.

#### 5. Execute o cliente DroidCam no computador

- Abra o programa **DroidCam Client**.
- Escolha a op√ß√£o **USB**.
- Clique em **Start**.

> O v√≠deo da c√¢mera do celular deve aparecer na janela do DroidCam.

---

### üß™ Verifique o √≠ndice da c√¢mera no OpenCV

No seu c√≥digo Python, altere este trecho se necess√°rio:

```python
cap = cv2.VideoCapture(1)
```
## Gerador de QR Code(OPCIONAL)

Este script gera um QR Code contendo dados de movimenta√ß√µes de motocicletas em formato JSON.

## üìÑ Descri√ß√£o

O script `gerador_qrcode.py`:

- Gera um objeto JSON com os dados de movimenta√ß√£o (ID, moto, ponto, data/hora) compat√≠vel com o backend no seguinte formato:
  {"idMoto":
   "MOTO001",
    "idPonto": 1,
     "dataHora": "2025-05-07T10:00:00"}
- Codifica esse JSON em um QR Code.
- Salva o QR Code em formato de imagem (`qrcode.png`).

---

## üöÄ Como Executar

### 1. Clone o reposit√≥rio (se ainda n√£o fez isso)

```bash
git clone https://github.com/Guilherme-Pelissari/Sprint2-IOT-IA.git
cd Sprint2-IOT-IA/gerador_qrcode
```
---
## 2. Instale as depend√™ncias

```bash
pip install qrcode[pil]
```
---
## ‚ñ∂Ô∏è Como executar

```bash
python gerador_qrcode.py
```
## Integrantes

- RM555516 - Luigi Berzaghi Hernandes Sespedes
- RM559093 - Cau√£ Dos Santos Souza
- RM558445 - Guilherme Pelissari Feitosa
